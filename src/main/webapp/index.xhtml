<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:p="http://primefaces.org/ui">
	<h:head>

		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
        <title>Cadastro de automovel</title>
        <link rel="StyleSheet" type="text/css" href="css/style.css" media="screen" />

    </h:head>

	<h:body>
		<h:form id="form_listagem">
			<p:panel id="pnl_listagem">
				<f:facet name="header">
					<h:outputText 
						styleClass="titulo-barra"
						value="Listagem"/>
					<p:commandButton 
						id="botao_novo" 
						value="Cadastro"
						icon="ui-icon-plusthick"
						update=":pnl_cadastro"
						styleClass="float-right"
						oncomplete="cadastrar()">

					</p:commandButton>
				</f:facet>
				<p:dataTable
					id="datatable_auto"
					var="auto" 
					value="#{automovelBean.automoveis}">
					<p:column headerText="Marca">
						<h:outputText value="#{auto.marca}"/>
					</p:column>

					<p:column headerText="Modelo">
						<h:outputText value="#{auto.modelo}"/>
					</p:column>

					<p:column headerText="Ano de Fabricação">
						<h:outputText value="#{auto.anoFabricacao}"/>
					</p:column>

					<p:column headerText="Ano do Modelo">
						<h:outputText value="#{auto.anoModelo}"/>
					</p:column>

					<p:column headerText="Observações">
						<h:outputText value="#{auto.observacoes}"/>
					</p:column>

					<p:column 
						headerText="Ações"
						styleClass="centro">
						<p:commandButton 
							id="cmbnt_acoes"
							ajax="true"
							type="button"
							icon="ui-icon-info"/>
						<p:contextMenu 
							for="cmbnt_acoes" 
							event="click">
							<p:menuitem 
								id="bnt_editar"
								icon="ui-icon-pencil"
								value="Editar"/>
							<p:menuitem
								id="bnt_excluir"
								icon="ui-icon-trash"
								value="Excluir"/>
						</p:contextMenu>
					</p:column>
				</p:dataTable>
			</p:panel>
		</h:form>

		<div id="div_cadastro" style="display: none !important;"> 
			<p:panel id="pnl_cadastro">
				<f:facet name="header">
					<h:outputText 
						value="Cadastro"
						styleClass="titulo-barra bold"/>
				</f:facet>
				<h:form id="form_cadastro">
					<p:fieldset legend="Dados">
						<h:panelGrid columns="2">

							<p:outputLabel value="Marca:"/>
							<p:inputText value="#{automovelBean.automovel.marca}"/>

							<p:outputLabel value="Modelo:"/>
							<p:inputText value="#{automovelBean.automovel.modelo}"/>

							<p:outputLabel value="Ano do Modelo:"/>
							<p:inputText value="#{automovelBean.automovel.anoModelo}"/>

							<p:outputLabel value="Ano de Fabricação:"/>
							<p:inputText value="#{automovelBean.automovel.anoFabricacao}"/>

							<p:outputLabel value="Observações:"/>
							<p:inputTextarea value="#{automovelBean.automovel.observacoes}"/>

						</h:panelGrid>
					</p:fieldset>
				</h:form>

				<p:spacer
					width="5"
					height="5"/>

				<p:outputPanel
					id="outpnl_botoes"
					rendered="true">
					<p:outputPanel
						id="outpnl_botao-sair"
						styleClass="float-left">  
						<p:commandButton
							icon="ui-icon-arrowreturnthick-1-w"
							value="Sair"
							oncomplete="sair()"
							styleClass="botao-sair">
						</p:commandButton>
					</p:outputPanel>
					<p:outputPanel id="outpnl_botao-salvar">
						<p:commandButton
							icon="ui-icon-check"
							value="Salvar"
							actionListener="#{automovelBean.listener}"
							action="#{automovelBean.salva()}"
							update=":form_listagem:pnl_listagem :form_listagem:datatable_auto"
							oncomplete="sair()"
							styleClass="botao-salvar">
						</p:commandButton>
					</p:outputPanel>
				</p:outputPanel>
			</p:panel>
		</div>
	</h:body>
	<script>
		const cadastrar = () => {
			$('#div_cadastro').fadeIn();
			$('#form_listagem').fadeOut();
		};

		const sair = () => {
			$('#div_cadastro').fadeOut();
			$('#form_listagem').fadeIn();
		};
	</script>
</html>


